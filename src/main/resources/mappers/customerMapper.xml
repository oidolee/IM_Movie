<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     
<mapper namespace="springBoot.ict.movie.dao.CustomerMapper">
	
	<!-- 고객등록 -->
	<insert id="insertCustomer" parameterType="springBoot.ict.movie.dto.CustomerDTO">
		INSERT INTO IM_Customer(IC_No, IC_email, IC_name, IC_password, IC_hp, IC_birthday, IC_address)
		VALUES((SELECT NVL(MAX(IC_No)+1, 1) FROM IM_Customer), #{email}, #{name}, #{password}, #{hp}, #{birthday}, #{address}) 
	</insert>
	
	<!-- 고객 리스트 -->
	<select id="customerList" resultType="springBoot.ict.movie.dto.CustomerDTO">
		SELECT * FROM IM_Customer;
	</select>
	
	
	<!-- 로그인 처리 -->
	<select id="loginCustomer" parameterType="String" resultType="int">
		SELECT COUNT(*) FROM IM_Customer WHERE IC_email=#{email} and IC_password=#{password} and show ='y'
	</select>
	
	
	
</mapper>